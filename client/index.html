<!DOCTYPE html>
<html>
  <head>
     <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Back End Assessment</title>
  </head>
     <header>
        <h1>Get Motivated</h1>
    </header>
   <body class="container">
   <button id="complimentButton">Get a compliment</button>
    <br><br>
   <button id='fortuneButton'>Get new fortune!</button>
      
       <section>
       <h1>Features</h1>
       <button id='getItems'>get items</button>
       <br><br>
       <input id='addItem'><button id='addItem'>Add New Item</button>
       <br><br>
       <button id='deleteItem'>delete an item</button>
       <br><br>
       </section>

       <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
       <script>
       document.getElementById("complimentButton").onclick = function () {
        axios.get("http://localhost:5000/api/compliment/")
            .then(function (response) {
              const data = response.data;
              alert(data);
            });
        };
        //fourtuneButton
        document.querySelector("#fortuneButton").addEventListener("click", function() {
           axios.get("http://localhost:5000/api/fortunes/")
            .then(function (res) {
              alert(res.data);
              
             });
        });


          //3 More Features
      let itemsArrLength = 0;
      document.querySelector("#getItems").addEventListener("click", function() {
        axios.get("http://localhost:5000/api/items/")
            .then(function (res) {
              itemsArrLength = res.data.length; 
              alert(res.data);
            })
            .catch(function(err) {
              console.log(err)
            });
      })
      // // //addItem
       document.querySelector("#addItem").addEventListener("click", function() {
        const newItem = document.querySelector('#newItem').value;

        if (!newItem.trim()) {
          alert('empty item value!')
          return;
        }

        const body = { newItem }

        axios.post("http://localhost:5000/api/items/", body)
            .then(function (res) {
              itemsArrLength = res.data.length; 
              alert('Item added!');
            })
            .catch(function(err) {
              console.log(err)
            });
      })
      // ////deleteItem
       document.querySelector("#deleteItem").addEventListener("click", function() {
        if (itemsArrLength <= 0) {
          alert(' No items for delete ')
          return;
        }

        const indexToDelete = prompt(`index${itemsArrLength - 1}`)
        console.log(indexToDelete)
      
        axios.delete(`http://localhost:5000/api/items/${indexToDelete}`)
            .then(function (res) {
              itemsArrLength = res.data.length;
              alert('select Items are deleted!');
            })
            .catch(function(err) {
              console.log(err)
            });
      })
    </script>
  </body>
</html>
